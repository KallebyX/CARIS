import { db } from '../db'
import { meditationCategories, meditationAudios } from '../db/schema'

async function seedMeditationData() {
  console.log('üå± Seeding meditation data...')

  try {
    // Seed meditation categories
    const categories = [
      {
        id: 'ansiedade',
        name: 'Ansiedade',
        description: 'Medita√ß√µes espec√≠ficas para controle e redu√ß√£o da ansiedade',
        icon: 'üò∞',
        color: '#ef4444',
        displayOrder: 1
      },
      {
        id: 'sono',
        name: 'Sono',
        description: '√Åudios para indu√ß√£o do sono e relaxamento noturno',
        icon: 'üò¥',
        color: '#3b82f6',
        displayOrder: 2
      },
      {
        id: 'estresse',
        name: 'Estresse',
        description: 'T√©cnicas r√°pidas para redu√ß√£o de estresse',
        icon: 'üò§',
        color: '#f59e0b',
        displayOrder: 3
      },
      {
        id: 'mindfulness',
        name: 'Mindfulness',
        description: 'Pr√°ticas de aten√ß√£o plena e presen√ßa',
        icon: 'üßò‚Äç‚ôÄÔ∏è',
        color: '#10b981',
        displayOrder: 4
      },
      {
        id: 'autocompaixao',
        name: 'Autocompaix√£o',
        description: 'Exerc√≠cios de loving-kindness e autocompaix√£o',
        icon: 'üíù',
        color: '#ec4899',
        displayOrder: 5
      },
      {
        id: 'respiracao',
        name: 'Respira√ß√£o',
        description: 'Guias respirat√≥rios com instru√ß√µes claras',
        icon: 'üå¨Ô∏è',
        color: '#06b6d4',
        displayOrder: 6
      },
      {
        id: 'relaxamento',
        name: 'Relaxamento',
        description: 'Progressive muscle relaxation e t√©cnicas de relaxamento',
        icon: 'üõÄ',
        color: '#8b5cf6',
        displayOrder: 7
      },
      {
        id: 'foco',
        name: 'Foco',
        description: 'Medita√ß√µes para concentra√ß√£o e produtividade',
        icon: 'üéØ',
        color: '#f97316',
        displayOrder: 8
      }
    ]

    console.log('Inserindo categorias...')
    await db.insert(meditationCategories).values(categories).onConflictDoNothing()

    // Sample meditation audios with free/open source content
    const sampleAudios = [
      {
        title: 'Respira√ß√£o 4-7-8 para Ansiedade',
        description: 'Uma t√©cnica simples de respira√ß√£o que ajuda a acalmar a mente ansiosa em apenas 5 minutos. Baseada na t√©cnica do Dr. Andrew Weil.',
        categoryId: 'ansiedade',
        duration: 300, // 5 minutos
        difficulty: 'iniciante',
        instructor: 'Ana Silva',
        audioUrl: 'https://archive.org/download/meditation-breathing-478/breathing-478-pt.mp3',
        thumbnailUrl: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=300&h=300&fit=crop',
        transcript: 'Encontre uma posi√ß√£o confort√°vel... Vamos praticar a respira√ß√£o 4-7-8...',
        guidedSteps: JSON.stringify([
          'Sente-se confortavelmente com a coluna reta',
          'Coloque a ponta da l√≠ngua atr√°s dos dentes superiores',
          'Expire completamente pela boca',
          'Inspire pelo nariz contando at√© 4',
          'Segure a respira√ß√£o contando at√© 7',
          'Expire pela boca contando at√© 8',
          'Repita o ciclo 4 vezes'
        ]),
        benefits: JSON.stringify([
          'Reduz ansiedade rapidamente',
          'Diminui a frequ√™ncia card√≠aca',
          'Ativa o sistema nervoso parassimp√°tico',
          'Melhora a qualidade do sono'
        ]),
        techniques: JSON.stringify(['Respira√ß√£o 4-7-8', 'Mindfulness']),
        preparationSteps: JSON.stringify([
          'Encontre um local silencioso',
          'Sente-se ou deite-se confortavelmente',
          'Desligue notifica√ß√µes',
          'Tenha √°gua por perto'
        ]),
        tags: JSON.stringify(['respira√ß√£o', 'ansiedade', 'r√°pido', 'iniciante']),
        language: 'pt-BR',
        format: 'mp3',
        sourceUrl: 'https://archive.org',
        license: 'Creative Commons Zero (CC0)',
        attribution: 'T√©cnica baseada nos ensinamentos do Dr. Andrew Weil',
        isCommercialUse: true,
        status: 'active',
        isPopular: true,
        isFeatured: true
      },
      {
        title: 'Body Scan Relaxante para Sono',
        description: 'Uma medita√ß√£o de varredura corporal de 15 minutos para relaxar completamente e preparar o corpo para um sono restaurador.',
        categoryId: 'sono',
        duration: 900, // 15 minutos
        difficulty: 'iniciante',
        instructor: 'Carlos Mendes',
        audioUrl: 'https://archive.org/download/meditation-bodyscan-sleep/bodyscan-sleep-pt.mp3',
        thumbnailUrl: 'https://images.unsplash.com/photo-1485815457792-d6d15aca88c4?w=300&h=300&fit=crop',
        transcript: 'Deite-se confortavelmente... Vamos come√ßar uma jornada pelo seu corpo...',
        guidedSteps: JSON.stringify([
          'Deite-se confortavelmente em sua cama',
          'Feche os olhos e respire profundamente',
          'Comece focando nos dedos dos p√©s',
          'Relaxe progressivamente cada parte do corpo',
          'Permita que a tens√£o se dissolva',
          'Termine com respira√ß√£o suave'
        ]),
        benefits: JSON.stringify([
          'Melhora a qualidade do sono',
          'Reduz tens√£o muscular',
          'Diminui pensamentos acelerados',
          'Promove relaxamento profundo'
        ]),
        techniques: JSON.stringify(['Body Scan', 'Relaxamento Progressivo']),
        preparationSteps: JSON.stringify([
          'Prepare seu quarto para dormir',
          'Use roupas confort√°veis',
          'Mantenha temperatura agrad√°vel',
          'Desligue todas as luzes'
        ]),
        tags: JSON.stringify(['sono', 'relaxamento', 'body scan', 'noite']),
        language: 'pt-BR',
        format: 'mp3',
        sourceUrl: 'https://archive.org',
        license: 'Creative Commons Attribution (CC BY)',
        attribution: 'Gravado por volunt√°rios da comunidade de medita√ß√£o',
        isCommercialUse: true,
        status: 'active',
        isPopular: true
      },
      {
        title: 'Mindfulness da Respira√ß√£o',
        description: 'Pr√°tica fundamental de mindfulness focada na respira√ß√£o natural. Ideal para iniciantes que querem desenvolver aten√ß√£o plena.',
        categoryId: 'mindfulness',
        duration: 600, // 10 minutos
        difficulty: 'iniciante',
        instructor: 'Maria Santos',
        audioUrl: 'https://archive.org/download/meditation-mindfulness-breathing/mindfulness-breathing-pt.mp3',
        thumbnailUrl: 'https://images.unsplash.com/photo-1549577434-954df12fb62e?w=300&h=300&fit=crop',
        guidedSteps: JSON.stringify([
          'Sente-se em posi√ß√£o confort√°vel',
          'Observe sua respira√ß√£o natural',
          'N√£o tente controlar a respira√ß√£o',
          'Quando a mente divagar, volte gentilmente',
          'Mantenha atitude de curiosidade gentil'
        ]),
        benefits: JSON.stringify([
          'Desenvolve concentra√ß√£o',
          'Reduz reatividade emocional',
          'Aumenta autoconsci√™ncia',
          'Melhora regula√ß√£o emocional'
        ]),
        techniques: JSON.stringify(['Mindfulness', 'Aten√ß√£o √† Respira√ß√£o']),
        tags: JSON.stringify(['mindfulness', 'respira√ß√£o', 'concentra√ß√£o', 'presente']),
        language: 'pt-BR',
        format: 'mp3',
        sourceUrl: 'https://freesound.org',
        license: 'Creative Commons Attribution (CC BY)',
        isCommercialUse: true,
        status: 'active'
      },
      {
        title: 'Al√≠vio R√°pido do Estresse',
        description: 'T√©cnica de 5 minutos para redu√ß√£o imediata do estresse. Perfeita para usar durante o trabalho ou em momentos tensos.',
        categoryId: 'estresse',
        duration: 300, // 5 minutos
        difficulty: 'iniciante',
        instructor: 'Jo√£o Costa',
        audioUrl: 'https://archive.org/download/meditation-stress-relief/stress-relief-quick-pt.mp3',
        thumbnailUrl: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=300&fit=crop',
        guidedSteps: JSON.stringify([
          'Pare o que est√° fazendo',
          'Respire profundamente 3 vezes',
          'Relaxe os ombros e a mand√≠bula',
          'Imagine um local de paz',
          'Retorne renovado √† atividade'
        ]),
        benefits: JSON.stringify([
          'Redu√ß√£o imediata do estresse',
          'Melhora clareza mental',
          'Diminui tens√£o f√≠sica',
          'Restaura energia'
        ]),
        techniques: JSON.stringify(['Respira√ß√£o Profunda', 'Visualiza√ß√£o']),
        tags: JSON.stringify(['estresse', 'r√°pido', 'trabalho', 'emerg√™ncia']),
        language: 'pt-BR',
        format: 'mp3',
        license: 'Creative Commons Zero (CC0)',
        isCommercialUse: true,
        status: 'active'
      },
      {
        title: 'Loving-Kindness em Portugu√™s',
        description: 'Medita√ß√£o de bondade amorosa adaptada para a cultura brasileira. Desenvolve compaix√£o por si mesmo e pelos outros.',
        categoryId: 'autocompaixao',
        duration: 720, // 12 minutos
        difficulty: 'intermediario',
        instructor: 'Luciana Oliveira',
        audioUrl: 'https://archive.org/download/meditation-loving-kindness/loving-kindness-pt-br.mp3',
        thumbnailUrl: 'https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=300&h=300&fit=crop',
        guidedSteps: JSON.stringify([
          'Conecte-se com sua inten√ß√£o de bondade',
          'Envie bondade para si mesmo',
          'Estenda bondade para pessoas queridas',
          'Inclua pessoas neutras',
          'Abrace pessoas dif√≠ceis com compaix√£o',
          'Expanda para todos os seres'
        ]),
        benefits: JSON.stringify([
          'Aumenta autocompaix√£o',
          'Reduz autocr√≠tica',
          'Melhora relacionamentos',
          'Desenvolve empatia'
        ]),
        techniques: JSON.stringify(['Loving-Kindness', 'Metta', 'Compaix√£o']),
        tags: JSON.stringify(['amor', 'compaix√£o', 'bondade', 'relacionamentos']),
        language: 'pt-BR',
        format: 'mp3',
        license: 'Creative Commons Attribution-ShareAlike (CC BY-SA)',
        attribution: 'Adaptado de tradi√ß√µes budistas por praticantes brasileiros',
        isCommercialUse: true,
        status: 'active'
      }
    ]

    console.log('Inserindo √°udios de exemplo...')
    await db.insert(meditationAudios).values(sampleAudios).onConflictDoNothing()

    console.log('‚úÖ Dados de medita√ß√£o inseridos com sucesso!')
  } catch (error) {
    console.error('‚ùå Erro ao inserir dados de medita√ß√£o:', error)
    throw error
  }
}

// Execute if run directly
if (require.main === module) {
  seedMeditationData()
    .then(() => {
      console.log('üéâ Seed completed!')
      process.exit(0)
    })
    .catch((error) => {
      console.error('üí• Seed failed:', error)
      process.exit(1)
    })
}

export { seedMeditationData }